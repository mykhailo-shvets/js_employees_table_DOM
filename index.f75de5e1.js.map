{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableHeader = document.querySelector('thead tr');\nconst tableBody = document.querySelector('tbody');\nconst offices = [\n  'Tokyo',\n  'Singapore',\n  'London',\n  'New York',\n  'Edinboorg',\n  'San Francisco',\n];\n\ntable.insertAdjacentHTML(\n  'afterend',\n  `\n  <form method=\"/\" action=\"GET\" class= \"new-employee-form\">\n    <label>Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" type=\"text\" data-qa=\"office\">\n        <option selected disabled></option>\n        ${createSelectList()}\n      </select>\n    </label>\n    <label>Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\">\n    </label>\n    <label>Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n`,\n);\n\nconst form = document.querySelector('.new-employee-form');\n\nlet isSortedColumn = null;\n\nfunction sortColumns(a, b) {\n  if (a.includes('$')) {\n    return a.slice(1).replace(',', '') - b.slice(1).replace(',', '');\n  }\n\n  if (+a) {\n    return a - b;\n  }\n\n  return a.localeCompare(b);\n}\n\ntableHeader.addEventListener('click', (e) => {\n  const indexColumn = [...tableHeader.children].findIndex(\n    (el) => el === e.target,\n  );\n\n  if (isSortedColumn !== e.target) {\n    const ASC = [...tableBody.children].sort((a, b) => {\n      const start = a.children[indexColumn].textContent;\n      const end = b.children[indexColumn].textContent;\n\n      return sortColumns(start, end);\n    });\n\n    tableBody.append(...ASC);\n    isSortedColumn = e.target;\n\n    return;\n  }\n\n  if (isSortedColumn === e.target) {\n    const DESC = [...tableBody.children].sort((a, b) => {\n      const start = a.children[indexColumn].textContent;\n      const end = b.children[indexColumn].textContent;\n\n      return sortColumns(end, start);\n    });\n\n    tableBody.append(...DESC);\n    isSortedColumn = null;\n  }\n});\n\nlet previosTargetRow = null;\n\ntableBody.addEventListener('click', (e) => {\n  const selectedRow = e.target.closest('tr');\n\n  if (previosTargetRow) {\n    previosTargetRow.classList.remove('active');\n  }\n\n  if (previosTargetRow === selectedRow) {\n    previosTargetRow.classList.remove('active');\n    previosTargetRow = null;\n\n    return;\n  }\n\n  previosTargetRow = selectedRow;\n\n  selectedRow.classList.add('active');\n});\n\nfunction createSelectList() {\n  return `${offices.map((office) => `<option>${office}</option>`).join('')}`;\n}\n\nfunction convertSalary(salary) {\n  return `$${(+salary).toLocaleString('en-US')}`;\n}\n\nfunction validData(key, value, data) {\n  if (key === 'name') {\n    if (value.trim().length < 4) {\n      return pushNotification(\n        450,\n        'error',\n        'The \"Name\" must contain more 4 letters',\n        'error',\n      );\n    }\n\n    if (\n      [...value].find((x) => x.toUpperCase() === x.toLowerCase() && x !== ' ')\n    ) {\n      return pushNotification(\n        450,\n        'error',\n        'Invalid data, please use name in \"Name\" field',\n        'error',\n      );\n    }\n  }\n\n  if (key === 'position') {\n    if (value.trim().length === 0) {\n      return pushNotification(\n        450,\n        'error',\n        'The \"Possition\" is empty',\n        'error',\n      );\n    }\n\n    if (\n      [...value].find((x) => x.toUpperCase() === x.toLowerCase() && x !== ' ')\n    ) {\n      return pushNotification(\n        450,\n        'error',\n        'Invalid data, please use letters in \"Position\" field',\n        'error',\n      );\n    }\n  }\n\n  if (data !== undefined) {\n    if (!('office' in data)) {\n      if (value.length === 0) {\n        return pushNotification(\n          450,\n          'error',\n          'The \"Office\" is not selected',\n          'error',\n        );\n      }\n    }\n  }\n\n  if (key === 'age') {\n    if (value < 18 || value > 90) {\n      return pushNotification(\n        450,\n        'error',\n        'The age must be more than 18, and less than 90',\n        'error',\n      );\n    }\n  }\n\n  if (key === 'salary') {\n    if (+value.slice(1) <= 0) {\n      return pushNotification(450, 'error', 'The \"Salary\" is empty', 'error');\n    }\n  }\n\n\n  return true;\n}\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const newEmployee = document.createElement('tr');\n  const data = new FormData(form);\n  const formValues = Object.fromEntries(data.entries());\n\n  formValues.salary = convertSalary(formValues.salary);\n\n  const values = [...Object.values(formValues)];\n\n  for (const key in formValues) {\n    if (validData(key, formValues[key], formValues) !== true) {\n      return;\n    }\n  }\n\n  newEmployee.innerHTML = `${values.map((value) => `<td>${value.trim()}</td>`).join('')}`;\n\n  tableBody.append(newEmployee);\n\n  pushNotification(\n    10,\n    'success',\n    'The data has been added successfully',\n    'success',\n  );\n\n  form.reset();\n});\n\nfunction pushNotification(posTop, title, description, type) {\n  if (document.body.contains(document.querySelector('.notification'))) {\n    document.querySelector('.notification').remove();\n  }\n\n  const notification = document.createElement('div');\n  const heading = document.createElement('h2');\n  const message = document.createElement('p');\n\n  notification.classList.add('notification', type);\n  notification.dataset.qa = 'notification';\n  heading.classList.add('title');\n\n  heading.textContent = title;\n  message.textContent = description;\n\n  notification.append(heading);\n  notification.append(message);\n  document.body.append(notification);\n\n  notification.style.top = `${posTop}px`;\n\n  setTimeout(() => {\n    notification.remove();\n  }, 5000);\n}\n\nconst nameColumn = {\n  0: 'name',\n  1: 'position',\n  2: 'office',\n  3: 'age',\n  4: 'salary',\n};\n\ntableBody.addEventListener('dblclick', (e) => {\n  if (document.querySelector('.cell-input')) {\n    return;\n  }\n\n  const selectedCell = e.target.closest('td');\n  const textCell = selectedCell.textContent;\n\n  selectedCell.textContent = '';\n\n  const findIndex = [...e.target.closest('tr').children].findIndex(\n    (x) => x === e.target.closest('td'),\n  );\n\n  if (findIndex === 2) {\n    const select = document.createElement('select');\n\n    select.classList.add('cell-input');\n    selectedCell.append(select);\n\n    select.innerHTML = `${createSelectList()}`;\n\n    select.addEventListener('blur', () => {\n      selectedCell.textContent = select.value;\n    });\n\n    select.addEventListener('keydown', (ev) => {\n      if (ev.code === 'Enter') {\n        select.blur();\n      }\n    });\n  } else {\n    const input = document.createElement('input');\n\n    input.classList.add('cell-input');\n    selectedCell.append(input);\n    input.focus();\n\n    if (findIndex > 2) {\n      input.type = 'number';\n    }\n\n    input.addEventListener('blur', () => {\n      let text = input.value.trim();\n\n      if (findIndex === 4) {\n        text = convertSalary(text);\n      }\n\n      if (validData(nameColumn[findIndex], text) !== true) {\n        selectedCell.textContent = textCell;\n\n        return;\n      }\n\n      selectedCell.textContent = text;\n\n      pushNotification(\n        10,\n        'success',\n        'The data has been successfully changed',\n        'success',\n      );\n    });\n\n    input.addEventListener('keydown', (ev) => {\n      if (ev.code === 'Enter') {\n        input.blur();\n      }\n    });\n  }\n});\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}